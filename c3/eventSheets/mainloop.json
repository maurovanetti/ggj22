{
	"name": "MainLoop",
	"events": [
		{
			"eventType": "variable",
			"name": "BoardLeft",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 615249917505198
		},
		{
			"eventType": "variable",
			"name": "BoardRight",
			"type": "number",
			"initialValue": "6",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 225338749414197
		},
		{
			"eventType": "variable",
			"name": "BoardTop",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 741716263116250
		},
		{
			"eventType": "variable",
			"name": "BoardBottom",
			"type": "number",
			"initialValue": "7",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 475272956770080
		},
		{
			"eventType": "variable",
			"name": "CenterX",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 983207427252198
		},
		{
			"functionName": "PaintTokens",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 222873672126575,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "SmallRabbit",
							"sid": 513616483493284,
							"parameters": {
								"comparison": 2,
								"x-co-ordinate": "BigRabbit.X"
							}
						}
					],
					"actions": [],
					"sid": 845492789281762,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "Token",
									"sid": 832544981316579,
									"parameters": {
										"comparison": 2,
										"x-co-ordinate": "CenterX"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Token",
									"sid": 677906135138401,
									"parameters": {
										"animation": "\"White\"",
										"from": "beginning"
									}
								}
							],
							"sid": 860433823725607
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "Token",
									"sid": 451663261176280,
									"parameters": {
										"comparison": 5,
										"x-co-ordinate": "CenterX"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Token",
									"sid": 522893164738676,
									"parameters": {
										"animation": "\"Black\"",
										"from": "beginning"
									}
								}
							],
							"sid": 245673712860581
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 225109014034714
						}
					],
					"actions": [],
					"sid": 902912808420258,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "Token",
									"sid": 521521844120585,
									"parameters": {
										"comparison": 2,
										"x-co-ordinate": "CenterX"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Token",
									"sid": 759066650839696,
									"parameters": {
										"animation": "\"Black\"",
										"from": "beginning"
									}
								}
							],
							"sid": 294007451290397
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "Token",
									"sid": 713324034157985,
									"parameters": {
										"comparison": 5,
										"x-co-ordinate": "CenterX"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Token",
									"sid": 547717845975614,
									"parameters": {
										"animation": "\"White\"",
										"from": "beginning"
									}
								}
							],
							"sid": 432865873832874
						}
					]
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Initialization",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 954022135319830
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 529012233626810,
							"parameters": {
								"variable": "CenterX",
								"value": "ViewportWidth(0) / 2"
							}
						},
						{
							"id": "set-x",
							"objectClass": "TokenPair",
							"sid": 105690998308485,
							"parameters": {
								"x": "CenterX"
							}
						},
						{
							"callFunction": "PaintTokens",
							"sid": 253053392301088
						}
					],
					"sid": 803571646485178,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 401377352767576,
									"parameters": {
										"object": "Mat"
									}
								}
							],
							"actions": [],
							"sid": 556221519019480,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 678374477945871,
											"parameters": {
												"object-to-create": "TokenSocket",
												"layer": "\"Mats\"",
												"x": "Mat.X",
												"y": "Mat.Y - (Mat.Height * 0.25)",
												"create-hierarchy": false
											}
										},
										{
											"id": "add-child",
											"objectClass": "Mat",
											"sid": 310636690803574,
											"parameters": {
												"child": "TokenSocket",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-z-elevation": true,
												"destroy-with-parent": true
											}
										},
										{
											"id": "move-to-top",
											"objectClass": "TokenSocket",
											"sid": 227906441138011
										}
									],
									"sid": 463838209741997
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 990427075130431,
											"parameters": {
												"object-to-create": "TokenSocket",
												"layer": "\"Mats\"",
												"x": "Mat.X",
												"y": "Mat.Y - (Mat.Height * 0.50)",
												"create-hierarchy": false
											}
										},
										{
											"id": "add-child",
											"objectClass": "Mat",
											"sid": 967767672132638,
											"parameters": {
												"child": "TokenSocket",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-z-elevation": true,
												"destroy-with-parent": true
											}
										},
										{
											"id": "move-to-top",
											"objectClass": "TokenSocket",
											"sid": 971804160999319
										}
									],
									"sid": 647782168820977
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 624416091452805,
											"parameters": {
												"object-to-create": "TokenSocket",
												"layer": "\"Mats\"",
												"x": "Mat.X",
												"y": "Mat.Y - (Mat.Height * 0.75)",
												"create-hierarchy": false
											}
										},
										{
											"id": "add-child",
											"objectClass": "Mat",
											"sid": 945348265584974,
											"parameters": {
												"child": "TokenSocket",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-z-elevation": true,
												"destroy-with-parent": true
											}
										},
										{
											"id": "move-to-top",
											"objectClass": "TokenSocket",
											"sid": 805470867946351
										}
									],
									"sid": 845118104566735
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 965410360623865,
									"parameters": {
										"group-name": "\"Plan\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 600966598803300,
									"parameters": {
										"group-name": "\"Initialization\"",
										"state": "deactivated"
									}
								}
							],
							"sid": 429929112374961
						}
					]
				}
			],
			"sid": 589289488241941
		},
		{
			"eventType": "variable",
			"name": "ActiveTokenUID",
			"type": "number",
			"initialValue": "-1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 858950568780222
		},
		{
			"eventType": "variable",
			"name": "ActiveTokenPairUID",
			"type": "number",
			"initialValue": "-1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 872284439199793
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Plan",
			"description": "",
			"isActiveOnStart": false,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Token Drag & Drop",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "Mouse",
									"sid": 644591851020207,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "Token"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 269887873053336,
									"parameters": {
										"variable": "ActiveTokenUID",
										"value": "Token.UID"
									}
								}
							],
							"sid": 554706560415245,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-parent",
											"objectClass": "Token",
											"sid": 399507316735533,
											"parameters": {
												"parent": "TokenPair",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 364845310285771,
											"parameters": {
												"variable": "ActiveTokenPairUID",
												"value": "TokenPair.UID"
											}
										}
									],
									"sid": 819474277181051
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-button-released",
									"objectClass": "Mouse",
									"sid": 274272956827118,
									"parameters": {
										"mouse-button": "left"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 175806885997997,
									"parameters": {
										"variable": "ActiveTokenUID",
										"value": "-1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 197713094135590,
									"parameters": {
										"variable": "ActiveTokenPairUID",
										"value": "-1"
									}
								},
								{
									"callFunction": "PaintTokens",
									"sid": 928716180544377
								}
							],
							"sid": 921134139061518
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 356469175042466,
									"parameters": {
										"object": "Token"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Token",
									"sid": 944027919961560,
									"parameters": {
										"instance-variable": "Frozen",
										"value": "true"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Token",
									"sid": 792553210735435,
									"parameters": {
										"instance-variable": "Active",
										"value": "false"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "Token",
									"sid": 494249707074019,
									"parameters": {
										"opacity": "100"
									}
								}
							],
							"sid": 750329894147160
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 902893646669872,
									"parameters": {
										"object": "TokenPair"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "TokenPair",
									"sid": 865155212248236,
									"parameters": {
										"instance-variable": "Active",
										"value": "false"
									}
								}
							],
							"sid": 879494301111197
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "TokenPair",
									"sid": 767384269949972,
									"parameters": {
										"unique-id": "ActiveTokenPairUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "TokenPair",
									"sid": 600729686333912,
									"parameters": {
										"instance-variable": "Active",
										"value": "true"
									}
								}
							],
							"sid": 807078994564631,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "TokenPair",
											"sid": 225881058197109,
											"parameters": {
												"child": "Token",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Token",
											"sid": 148784047192130,
											"parameters": {
												"instance-variable": "Frozen",
												"value": "false"
											}
										},
										{
											"id": "move-to-top",
											"objectClass": "Token",
											"sid": 414212920411553
										}
									],
									"sid": 490823067693677,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "Token",
													"sid": 523600477053042,
													"parameters": {
														"unique-id": "ActiveTokenUID"
													}
												}
											],
											"actions": [
												{
													"id": "set-boolean-instvar",
													"objectClass": "Token",
													"sid": 650052637251873,
													"parameters": {
														"instance-variable": "Active",
														"value": "true"
													}
												},
												{
													"id": "set-opacity",
													"objectClass": "Token",
													"sid": 492792978311863,
													"parameters": {
														"opacity": "100"
													}
												}
											],
											"sid": 163167091584508
										}
									]
								}
							]
						}
					],
					"sid": 828550387342693
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Snap to Mats",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "StickyVerticalRange",
							"type": "number",
							"initialValue": "50",
							"comment": "",
							"isStatic": false,
							"isConstant": true,
							"sid": 333150412117992
						},
						{
							"eventType": "variable",
							"name": "SequenceIndex",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 219804980719398
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "TokenPair",
									"sid": 936982832771901,
									"parameters": {
										"instance-variable": "Active"
									}
								}
							],
							"actions": [],
							"sid": 333992008609659,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "TokenPair",
											"sid": 257248427677132,
											"parameters": {
												"instance-variable": "LastFrozenY",
												"comparison": 2,
												"value": "TokenPair.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "TokenPair",
											"sid": 604082799645280,
											"parameters": {
												"instance-variable": "OffsetY",
												"value": "TokenPair.Y + StickyVerticalRange"
											}
										}
									],
									"sid": 351726907356339
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 334860477425584
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "TokenPair",
											"sid": 424260140447637,
											"parameters": {
												"instance-variable": "OffsetY",
												"value": "TokenPair.Y - StickyVerticalRange"
											}
										}
									],
									"sid": 222053200925432
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 624329745988102,
									"parameters": {
										"variable": "ActiveTokenPairUID",
										"comparison": 2,
										"value": "0"
									}
								},
								{
									"id": "for-each-ordered",
									"objectClass": "System",
									"sid": 651179675614621,
									"parameters": {
										"object": "TokenPair",
										"expression": "TokenPair.OffsetY",
										"order": "descending"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 822009528747654,
									"parameters": {
										"variable": "SequenceIndex",
										"value": "1"
									}
								}
							],
							"sid": 713018346915819,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 935707272787065,
											"parameters": {
												"object": "Mat"
											}
										},
										{
											"id": "pick-nth-child",
											"objectClass": "Mat",
											"sid": 192798292442164,
											"parameters": {
												"child": "TokenSocket",
												"instance": "SequenceIndex"
											}
										}
									],
									"actions": [
										{
											"id": "set-y",
											"objectClass": "TokenPair",
											"sid": 981528101565412,
											"parameters": {
												"y": "TokenSocket.Y"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "TokenPair",
											"sid": 919348007016903,
											"parameters": {
												"instance-variable": "OffsetY",
												"value": "TokenPair.Y"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "TokenPair",
											"sid": 200736893663724,
											"parameters": {
												"instance-variable": "LastFrozenY",
												"value": "TokenPair.Y"
											}
										}
									],
									"sid": 208128162714814,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-children",
													"objectClass": "TokenPair",
													"sid": 212029597011607,
													"parameters": {
														"child": "Token",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-y",
													"objectClass": "Token",
													"sid": 254265434871270,
													"parameters": {
														"y": "TokenSocket.Y"
													}
												}
											],
											"sid": 432495495472825,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-nearestfurthest",
															"objectClass": "Token",
															"sid": 319596802153902,
															"parameters": {
																"which": "nearest",
																"x": "TokenSocket.X",
																"y": "TokenSocket.Y"
															}
														}
													],
													"actions": [
														{
															"id": "set-x",
															"objectClass": "Token",
															"sid": 387982783994894,
															"parameters": {
																"x": "TokenSocket.X"
															}
														}
													],
													"sid": 993102740798871
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 663498249331226
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Token Pair Sync",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "PassiveTokenOpacity",
							"type": "number",
							"initialValue": "60",
							"comment": "",
							"isStatic": false,
							"isConstant": true,
							"sid": 734215529077657
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Token",
									"sid": 674191676014859,
									"parameters": {
										"instance-variable": "Active"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "Token",
									"sid": 970806225049952,
									"parameters": {
										"parent": "TokenPair",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "Token",
									"sid": 644773072050303,
									"parameters": {
										"x": "Mouse.X",
										"y": "Mouse.Y"
									}
								},
								{
									"id": "set-y",
									"objectClass": "TokenPair",
									"sid": 161830297859737,
									"parameters": {
										"y": "Token.Y"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "TokenPair",
									"sid": 594346550522689,
									"parameters": {
										"instance-variable": "DeltaX",
										"value": "Token.X - CenterX"
									}
								}
							],
							"sid": 280065767888125
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "TokenPair",
									"sid": 455026717904725,
									"parameters": {
										"unique-id": "ActiveTokenPairUID"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "TokenPair",
									"sid": 920900704737578,
									"parameters": {
										"child": "Token",
										"which": "own"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Token",
									"sid": 566703277317614,
									"parameters": {
										"instance-variable": "Active"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "Token",
									"sid": 957527947173967,
									"parameters": {
										"x": "CenterX - TokenPair.DeltaX",
										"y": "TokenPair.Y"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "Token",
									"sid": 820353906175590,
									"parameters": {
										"opacity": "PassiveTokenOpacity"
									}
								}
							],
							"sid": 701400756627156
						}
					],
					"sid": 123651593324299
				}
			],
			"sid": 368686063653739
		}
	],
	"sid": 912314645175753
}